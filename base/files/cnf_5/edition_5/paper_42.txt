Refined Gaussian Weighted Histogram Intersection and Its Application in
Number Plate Categorization
Wenjing Jia, Huaifeng Zhang, Xiangjian He, and Qiang Wu
Computer Vision Research Group, University of Technology, Sydney
{wejia, hfzhang, sean, wuq}@it.uts.edu.au
Abstract
This paper proposes a refined Gaussian weighted
histogram intersection for content-based image matching
and applies the method for number plate categorization.
Number plate images are classified into two groups
based on their colour similarities with the model image
of each group. The similarities of images are measured
by the matching rates between their colour histograms.
Histogram intersection (HI) is used to calculate the
matching rates of histograms. Since the conventional
histogram intersection algorithm is strictly based on the
matching between bins of identical colours, the final
matching rate could easily be affected by colour
variation caused by various environment changes. In our
recent paper [9], a Gaussian weighted histogram
intersection (GWHI) algorithm has been proposed to
facilitate the histogram matching via taking into account
matching of both identical colours and similar colours.
The weight is determined by the distance between two
colours. When applied to number plate categorization,
the GWHI algorithm demonstrates to be more robust to
colour variations and produces a classification with
much lower intra-class distance and much higher interclass distance than previous HI algorithms. However, the
processing speed of this GWHI method is still not
satisfying. In this paper, the GWHI method is further
refined, where a colour quantization method is utilized to
reduce the number of colours without introducing
apparent perceptual colour distortion. New experimental
results demonstrate that using the refined GWHI method,
image categorization can be done more efficiently.
Keywords‚ÄîRefined Gaussian weighted histogram
intersection, Number plate categorization, Colour
quantization, Colour variations.

1. Introduction
Using colour histogram as a stable representation
over change in view for object recognition was explored
by Swain and Ballard [1][2]. They introduced the colour
indexing technique to efficiently recognize objects by

matching their colour histograms via histogram
intersection (HI) method. This algorithm did not address
the issue of illumination variation.
Towards an illumination-insensitive histogrambased image matching algorithm, many alternations have
been suggested. These methods can be roughly divided
into two groups.
The first group, instead of using colour directly,
aims to generate histograms from other colour-generated
features. This includes Funt et al.‚Äôs [3] ratio of colour
RGB triples, and Nayar et al.‚Äôs [4] colour reflection
ratios. Gevers et al. [5], Jia et al. [6] and Zhang et al. [7]
further developed the colour ratio gradient to make it less
sensitive to the geometry and position of the object,
shadows, illuminations, and other imaging conditions.
The second group tries to improve the definition of
the histogram intersection which is used to measure the
matching degree of two histograms. Wong et al. [8]
proposed a merged-palette histogram matching (MPHM)
method. Using their method, two perceptually similar
colours, instead of identical colours, can be intersected.
The idea proposed in our recent paper [9] belongs to
the second group. Note that, in the MPHM method, the
weight, describing the contribution of a set of similar
colours used to matching the given colour, is the same.
This however does not well reflect the matching
contributed by different colours. In this paper, we
propose a Gaussian-weighted histogram intersection
(GWHI) algorithm, where a weight function is used to
differentiate the contributions by different colours.
The proposed GWHI algorithm is applied to number
plate categorization. During our previous research on
automatic number plate detection [10], it is found that
there are different classes of number plates with quite
different features. Our aim is to differentiate number
plates which belong to different categories for the benefit
of further detection and recognition task. Due to variant
environment under which the number plate images were
taken, there are unavoidably big variations between
number plates of same classes in colour. A feature and a
corresponding matching method robust to colour
variation are hence essential.
Since the GWHI proposed in [9] needs to scan full
colour space in order to compute the matching between

Proceedings of the International Conference on Computer Graphics, Imaging and Visualisation (CGIV'06)
0-7695-2606-3/06 $20.00 ¬© 2006

two colour histograms, it usually takes longer time to
compute the matching rate. This processing speed is
apparently unsatisfactory for practical use. In this paper,
the GWHI method is further refined to improve its
processing speed. The number of colours is reduced
greatly by using Wu‚Äôs [11] colour quantization method
without introducing apparent perceptual colour
distortions. Using the refined GWHI method, image
matching can be done much faster than using GWHI
method and previous HI methods. Since the colour
quantization method used for this refinement does not
introduce apparent perceptual colour distortions, the
matching using the new method still keeps all advantages
of the GWHI method.
The remaining parts of the paper are organized as
follows. The previous HI methods are introduced in Sect.
2. In Sect. 3, Gaussian weighted HI and its refined
counterpart is presented in details. In Sect. 4, the
proposed algorithm is tested and the experimental results
are shown and compared with the conventional HI and
the MPHM methods. The paper is concluded in Sect. 5.

2. Previous Histogram Intersection Methods
Histogram-based image matching algorithms try to
measure the similarities in contents via their histograms
between a model image and any images in database, i.e.,
target images, in order to properly classify images.
Histogram intersection (HI), proposed by Swain and
Ballard [1][2], is a straightforward method to calculate
the matching rate of two histograms for this purpose.

2.1. Histogram intersection (HI)
Assuming the histograms of the model image and
target image are H M and H T respectively, and each
contains n bins, Swain and Ballard [2] defined the
intersection, denoted by HI , of two histograms as:
HI

¬¶

n
i 1

min h M (i), hT (i )  ,

(1)

where both H M and H T are normalized to the range of
[0, 1] by the total number of pixels in images.
It can be seen that the resultant fractional matching
value between 0 and 1 is actually the proportion of pixels
from the target image that have corresponding pixels of
the same colour in the model image. A higher matching
rate indicates a higher similarity between two images.

2.2. Problems with existing HI algorithms
The conventional HI algorithm has a limitation due
to the fact that it assumes identical colour matching, i.e.,
only corresponding bins of identical colours can be
matched. In practice, however, the colours of real world
images can be distorted both in the scene itself and in the
image capturing process. Hence, images with same
visual information but with different colour intensity
may degrade the similarity level significantly when the
conventional HI method is used.

Note that in the conventional HI method, the RGBbased histogram is investigated. However, images with
same chroma information but with shifted lightness may
degrade the similarity level significantly [8]. An intuitive
solution to this problem is to obtain histograms based on
other colour space. It can be easily testified that using
other colour spaces, such as normalized rgb, which is
believed to be simple and robust to intensity changes of
colours, still cannot address this kind of colour variations.
Another problem associated with the conventional
HI method is its heavy computation load. Assume the
total number of possible colours in the model image is
N C . So, there are N C bins in the colour histogram of the
model image. Without loss of generality, we assume that
there is same number of colours in the target images. If
the colour sets of two images are identical, a single binto-bin comparing is enough. Thus the minimum number
of comparison operations between two colour histograms
will be N C . However, if two colour sets are different,
for each bin in the model colour histogram, each bin of
the target colour histogram needs to be searched and
2
compared. Thus, there will be at least N C  comparison
operations in order to work out the similarity between
two colour histograms. It is known that the total number
of colours for a 24-bit true-colour image is N C 2 24 .
Without reducing the number of colours, it is unlikely
that the histogram comparison operation could be
executed in real-time with such a tremendous dimension.
In order to overcome these problems, Wong et al. [8]
proposed a merged-palette histogram matching (MPHM)
method. The essence of the method is to extend the
intersection from bins of identical colours to bins of
similar colours. In their algorithm, as long as the distance
between two colours is less than a fixed threshold, the
intersection between the bins of these two colours will be
calculated. This algorithm has produced more robust
image retrieval results for images captured under various
illumination conditions. However, it assumes an identical
weight of the contribution between colours which have
different similarities with the given colour. When applied
to number plate image matching, the algorithm still
exhibited to be sensitive to colour variations.
In our recent paper [9], a Gaussian weight function
is utilized to differentiate the contribution between
colours which have different distance to the given colour.
This new histogram intersection method is called
Gaussian Weighted Histogram Intersection, abbreviated
as GWHI. In order to improve the matching speed, in
this paper the GWHI is further refined by reducing the
number of colours without introducing dramatic
perceptual distortion.

3. Refined GWHI method
3.1. GWHI
Let us denote the distance between two colours
G
G
G
G
G
G
C1 and C 2 as C1  C 2 , and the weight as w C1  C 2 ,

Proceedings of the International Conference on Computer Graphics, Imaging and Visualisation (CGIV'06)
0-7695-2606-3/06 $20.00 ¬© 2006





which is a function of the distance between two colours.
A generalized histogram intersection can be written as:
n
n
G
G
G
G
HI
min h M (C i ), hT (C j ) ¬ò w C i  C j
(2)

 

¬¶¬¶ 
i 1



j 1

With this definition, the weight function in the
conventional HI and the MPHM corresponds to:
G
G
G
G
¬≠1
if C i  C j d Th
(3)
w Ci  C j
¬Æ
otherwise
¬Ø0
where Th is zero for the conventional HI algorithm and a
non-zero constant for the MPHM algorithm.
Instead of assigning identical weight for each colour
as long as they fall in the range of bandwidth, a Gaussian
function is applied to describe the relationship between
the colour distance and its contribution to matching as:
G
G
G
G
G
G
¬≠¬∞ f ( C i  C j )
if C i  C j d BW
w Ci  C j
¬Æ
¬∞¬Ø
0
otherwise
(4)
where BW is the bandwidth of the weight function and
the Gaussian function f (x) is:









x2
f  x  f .
(5)
)
2V 2
2S V
In our practice, for simplifying computation purpose,
we take 99.9% energy to approximate the total energy in
the infinite space and truncate the tail of the Gaussian
function. Note that for a Gaussian function, when
x  3.3V , we have:
A

f ( x)

¬≥

exp(

x

x



f ( x)dx

¬≥

quantization must be designed carefully to ensure that
perceptually similar colours are mapped to the same
quantized colour values. As its consequence, in [6] a
perceptual colour naming method was employed in order
to handle colour variations. The standard ISCC-NBS
Colour Names Dictionary was employed to quantize and
name the colour space. Each of the pixels is assigned to
the standard name of the closest ISCC-NBS centroid
colour, according to the Euclidean distance in CIELab
colour space. This method uses a single colour set for all
images and the histogram comparison can thus be
performed on a bin-to-bin base. However, since the
colours of compound colour objects, such as car number
plates, only take a very small part of the standard colour
set, such quantizing methods usually cause large
perceptible colour distortions. As explained earlier in
Section 2, however, the identical bin-to-bin matching
cannot address matching between distorted colours.
In this paper, Wu‚Äôs [11] optimal colour quantization
algorithm, which is based on variance minimization, is
employed to reduce the number of colours by
introducing only slight colour distortion into the
quantized images. Fig. 1 gives examples of the quantized
images and their original images.

f

99.9% f ( x)dx .

(6)

f

So, the bandwidth of Gaussian function is BW 3.3V .
The definition of colour distance is measured by the
perceptual difference as:
G
G
C1  C 2
(l1  l 2 ) 2  (u1  u 2 ) 2  (v1  v 2 ) 2 (7)
G
G
where C1 (l1 , u1 , v1 ) and C 2 (l 2 , u 2 , v 2 ) are two
colours represented in CIEluv colour space. l takes a
value in the range of [0, 100] , u takes a value in the
range of [83, 175] , and v takes a value of [134, 107] .
The detailed conversion from RGB to CIELuv colour
space can be found in [12] (pp. 110). In experiments, the
reference white is set at ( R, G, B) (255,255,255) .

Fig. 1 Two images (left column) and their
quantized counterparts (right) using variance
minimization algorithm with eight colours.

Since the interested objects in this research take very
limited number of colours, each image can be quantized
into a fixed small number of colours while introducing
only slight distortion based on the variance minimization
rule. Eight colours and sixteen colours have been
experimented. Since using sixteen colours did not make
many improvements for image matching results, each
image is quantized into eight colours using the Wu‚Äôs
algorithm. Obviously, the resultant colour set contained
in each image depends on its original colour distribution
before colour quantization.

3.2. Reducing number of colours

3.3. Refined GWHI

Reducing the number of colours in images is essential
in order to match histograms in real-time via HI method.
The colour number reducing operation is also called
colour quantization in references. In [5], colour
quantization was simply performed in the RGB colour
space using a k -means nearest neighbour algorithm.
However, the RGB colour space is known to be sensitive
to colour variations. Furthermore, the appearance of the
colours of an object may differ significantly from image
to image because of illumination variations, perceptual
colour surround effects, and so forth [6]. The

Since the interested objects in the research, colour
number plates, are compound colour objects, which
perceptually take very limited number of colours, in
order to improve the speed of computing, each image is
firstly quantized into eight colours with only slight
perceptual distortion introduced.
After colour quantization, there will be a short colour
mapping table (also called palette or look-up table) in
each image file, which contains colours that are used in
current image. The data in the quantized image file only
record the index of the colour in the colour table, rather

Proceedings of the International Conference on Computer Graphics, Imaging and Visualisation (CGIV'06)
0-7695-2606-3/06 $20.00 ¬© 2006

than its detailed colour information. Thus, the colour
histogram only contains eight bins with each bin
representing a colour index.
When used to compute matching of two histograms, in
order to compute the distance between two colours, of
which each corresponds to a bin in their histograms, the
colour value represented in CIELuv colour space should
be employed. Thus the colour table needs to be carried
with each quantized colour image to record the mapping
relationship from each colour index to its corresponding
colour value.
By this way, in our experiments, the total number of
comparisons between two colour histograms is reduced
to 8 2 64 . This improves the computation efficiency of
the histogram matching greatly while satisfactory results
can still be produced.

bin are firstly converted to CIELuv colour space. Then,
colour distance is computed in regard to the l, u and v
values. In the refined GWHI method, however, before
collecting the colour histogram of each image, images
represented in full colour space is firstly quantized into
eight colours using Wu‚Äôs colour quantization algorithm.

(a) Yellow model image

4. Experiments
The proposed method is applied to categorize car
number plate images into proper classes based on their
colours. The aim is to find a robust classification
between different classes of number plate images.
Number plates are viewed to belong to the same class
when they have similar foreground and background
colours, but they may have quite different contents
(characters), size and viewing conditions. Two classes of
number plates are frequently used in NSW, Australia.
Without loss of generality, images of the two classes of
number plate are tested, namely, plates with yellow
background, denoted by YELLOW plates, and plates with
white background, denoted by WHITE plates. In each
group, a typical image is firstly selected manually as the
model image. Histograms of other images to be
categorized are then computed and matched with the
histograms of two model images. Plate images are
categorized to the group of which the image has a higher
matching with the model image.

4.1. Experiment setup
A yellow number plate image is selected as the
YELLOW model image, and a white number plate image
is selected as the WHITE model image. The selection of
model images is basically random. The selection
criterion is that the selected model images are neither too
bright nor too dark compared with other images to be
categorized. The two model images and some examples
of yellow and white target images are shown in Fig. 2
and Fig. 3 respectively. It can be seen that, due to various
environment changes, images that belong to same class
may still have quite different appearances.
In order to compare experimental results obtained
with three methods, all histogram matching are
computed in CIEluv color space. For this purpose, color
histograms are firstly collected in RGB colour space.
Three histogram intersection methods mentioned in Sect.
3 are then applied to compute the matching rates between
histogram of each target image to the histogram of model
image. During all matching, colours represented by each

(b) Yellow target images
Fig. 2 Examples of yellow number plates.

(a) White model image

(b) White target images
Fig. 3 Examples of white number plates.
Furthermore, the parameter V in our method in (5)
can be selected empirically. In order to compare
experimental results with those of the MPHM algorithm,
following restrictions are set on selection of V :
(1) f ( x) | x 0 1 ;
f

(2)

¬≥ f ( x)dx

2Th ; and

f

¬≥

f

(3) Using 99.9% f ( x )dx to approximate
f

f

¬≥ f ( x)dx .
f

where Th is the threshold set in the MPHM method.
Condition (1) sets the contributions of identical colours
in two methods as the same. Condition (2) and (3) makes
sure the overall weights between two different methods
are approximately same.
It can be worked out from Condition (1) that
A
1.
(8)
2S V
From Conditions (2) and (3), it can be worked out that,
0.999 A 2Th .
(9)
From Eq. (8) and (9), it can be derived that

Proceedings of the International Conference on Computer Graphics, Imaging and Visualisation (CGIV'06)
0-7695-2606-3/06 $20.00 ¬© 2006

100

90

90

80

80

70

70

60

60

50

50

40

40

30

30

20

20

Matching Rate (%)

Matching Rate (%)

100

10
0

10
20

40

60

80
100
Target Image (n)

120

140

160

0

20

40

60

80
100
Target Image (n)

120

140

160

120

140

160

100

100

90

90

80

80

70

70

60

60

50

50

40

40

30

30

20

20

10

10

0

20

40

60

80
100
Target Image (n)

120

140

160

Matching Rate (%)

Matching Rate (%)

(a) Matching results obtained using the conventional HI method.

0

20

40

60

80
100
Target Image (n)

(b) Matching results obtained using the MPHI method.
100

100

90

90
80

Matching Rate (%)

Matching Rate (%)

80
70

70

60

60

50

50

40

40

30

30

20

20

10
0

10
20

40

60

80
100
Target Image (n)

120

140

160

0

20

40

60

80
100
Target Image (n)

120

140

160

(c) Matching results obtained using the proposed GWHI method.
Fig. 4 Histogram matching results obtained using three histogram intersection methods. Matching
data of yellow number plate images are marked as red dots, and matching data of white number
plate images are marked as blue dots. Left column are the matching results with the yellow model
image; right column are the matching results with the white model image.

V

2

Th  0.8Th .
0.999 2S
Thus, we have BW 3.3V  2.633Th , and Eq. (5) is
x2
) , 2.633Th  x  2.633Th , (10)
f ( x) exp(
2V 2
where V  0.8Th . The bandwidth Th in experiments is
set as Th 15 , which is the same as in [8]. Thus, we
have V  12 and BW  40 .

4.2. Experimental results and discussion
The colour histograms of the model images, in
CIEluv colour space, are computed and matched with
those of total 172 number plate images, including 109
yellow plates and 63 white plates.
Using the refined GWHI method, the average time
needs for matching two number plate images with
dimension of 120 u 40 is 11 milliseconds. Compared
with the average time of 2.035 seconds using the GWHI
method, 0.935 seconds using the MPHM method, and
1.081 seconds using the conventional HI method, this

Proceedings of the International Conference on Computer Graphics, Imaging and Visualisation (CGIV'06)
0-7695-2606-3/06 $20.00 ¬© 2006

processing speed is 185 times, 85 times, and 95 times
faster respectively. All data are tested on a computer
with Intel Pentium IV 1.8GHz CPU and 380MB of RAM.
The matching results are plotted in Fig. 4, where
matching data of yellow plates are painted in red dots
and white plates in blue dots (darker if viewed in blackwhite picture).
As seen in Fig. 4(a) that, using the conventional HI
method, it is impossible to separate two classes of
number plate images via their colour histograms.
Actually, even though the matching rates of number
plates from different classes are very low, the matching
rates of the number plates from same class may also be
as low as 0.00%.
Using the MPHM method, it can be seen from Fig.
4(b) that this problem has been improved a lot. As shown
in the figures, the distance between the matching rates of
inter-class number plates have been increased greatly.
However, though using MPHM can separate two classes
given that a proper threshold is carefully selected, the
matching rates of same class are still very sensitive to
colour variations. As shown in the figure, the matching
data of intra-class plates still spread in a wide range.
Using our proposed GWHI method, it can be seen in
Fig. 4(c) that, although all matching rates have increased
to some extent, it is more easily to categorize two classes
of number plates based on the matching to the model
images. The intra-class distance of the matching
becomes smaller and the inter-class distance becomes
larger. This is due to the fact that a wider bandwidth has
been used than in the MPHM method. At the same time,
the matching rates of number plates from same class are
much more stable compared to the results obtained using
the HI and MPHM methods. This is because a weight
function is employed rather than simply adding up all
intersections from different colours. Even though the
matching rates of different class of plates have increased
at the same time, the distance between two classes
becomes larger. This leads to a more confident and easier
categorization.

5. Conclusions
In this paper, a refined Gaussian weighted histogram
intersection (GWHI) method is proposed and applied for
number plate categorization. A Gaussian function is used
to weight the contribution to the matching by the colors
which have different distance with the given color. Our
aim is to categorize number plate images into two classes,
plates with perceptually yellow background and plates
with perceptually white ground. By using the variance
minimized colour quantization method to reduce the
number of colours, the image matching is much faster
than the GWHI algorithm and previous HI algorithms,
while satisfactory categorization results can still be
produced. Experimental results show that using the
refined GWHI method, there are following benefits: (1)
the intra-class distance becomes much smaller; (2) the
inter-class distance becomes much larger; and (3) the
algorithm is much faster than previous histogram-based

methods. In conclusion, the matching of color histogram
using the refined GWHI method is less sensitive to color
variation and faster than previous HI methods.

Acknowledgement
The work in this paper is supported by Australian
Research Council (ARC) Large Research Grant No.
DP0451666.

References
[1]

M.J. Swain and D.H. Ballard, "Indexing via colour
histograms", Proceedings of the Third International
Conference on Computer Vision, 1990: pp. 390-393.
[2] M.J. Swain and D.H. Ballard, "Colour Indexing",
International Journal of Computer Vision, 1991. 7(1): pp.
11-32.
[3] B.V. Funt and G.D. Finlayson, "Colour constant colour
indexing", IEEE Transactions on Pattern Analysis and
Machine Intelligence, 1995. 17(5): pp. 522-529.
[4] S.K. Nayar and R.M. Bolle, "Reflectance ratio: A
photometric invariant for object recognition",
Proceedings of the Fourth International Conference on
Computer Vision, 1993: pp. 280-285.
[5] T. Gevers and W.M. Smeulders, "Colour constant ratio
gradients for image segmentation and similarity of
texture objects", Proceedings of the 2001 IEEE
Computer Society Conference on Computer Vision and
Pattern Recognition, 2001. 1: pp. I-18-I-25 vol.1.
[6] W. Jia, H. Zhang, X.. He, and Q. Wu, "Symmetric
Colour Ratio in Spiral Architecture," Lecture Notes in
Computer Science, Vol.3852, pp.204-213, 2006.
[7] H. Zhang, W. Jia, X. He and Q. Wu, "Modified Colour
Ratio Gradient," Proceedings of the International
Workshop on Multimedia Signal Processing (IEEE),
pp.317-320, 2005.
[8] K.-M. Wong, C.-H. Cheung, and L.-M. Po, "Mergedcolour histogram for colour image retrieval,"
Proceedings of the 2002 International Conference on
Image Processing, vol. 3, pp. 949-952 vol.3, 2002.
[9] W. Jia, H. Zhang, X. He and Q. Wu, ‚ÄúGaussian
Weighted Histogram Intersection for License Plate
Classification,‚Äù Proceedings of the 18th International
Conference on Pattern Recognition, to appear, 2006.
[10] W. Jia, H. Zhang, X. He and M. Piccardi, ‚ÄúMean Shift
for Accurate Number Plate Localization,‚Äù Proceedings of
the International IEEE Conference on Intelligent
Transportation Systems, pp.566-571, 2005.
[11] X. Wu, ‚ÄúEfficient statistical computations for optimal
color quantization‚Äù. Graphics Gems, vol. II. Academic
Press, New York, pp. 126-133, 1991.
[12] H. Lee, Introduction to Color Imaging Science,
Cambridge University Press, 2005

Proceedings of the International Conference on Computer Graphics, Imaging and Visualisation (CGIV'06)
0-7695-2606-3/06 $20.00 ¬© 2006

